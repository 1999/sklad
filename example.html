<!DOCTYPE HTML>
<html>
<head>
    <title>Sklad example</title>
    <script src="./sklad.js"></script>
    <script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function () {
        sklad.open("example" + Date.now(), {
            migration: {
                "1": function (database) {
                    var objStore = database.createObjectStore("obj_store", {autoIncrement: true});
                    objStore.createIndex('ololo', 'ololo', {unique: true});

                    var objStore = database.createObjectStore("obj_store2", {autoIncrement: true});
                    objStore.createIndex('foo', 'foo');
                }
            }
        }, function (err, database) {
            if (err)
                throw new Error(err);

            database.upsert("obj_store", {date: "Smth " + Date.now(), ololo: 'KEY'}, function (err, key) {
                if (err)
                    throw err;
                
                database.insert("obj_store", {date: "Smth " + Date.now(), ololo: 'KEY2'}, function (err, key) {
                    if (err)
                        return console.error(err);

                    // @see https://developer.mozilla.org/en-US/docs/IndexedDB/IDBKeyRange
                    database.get("obj_store", {
                        direction: sklad.PREV
                    }, function (err, data) {
                        if (err)
                            throw err;

                        console.log(JSON.stringify(data));
                    });
                });
            });
        });
    }, false);
    </script>
</head>
<body>

</body>
</html>